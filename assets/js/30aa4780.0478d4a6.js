"use strict";(self.webpackChunkpabpereza=self.webpackChunkpabpereza||[]).push([[7012],{45852:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>c});var r=s(17624),o=s(4552);const t={},i=void 0,a={id:"notas/Kubernetes/ingress_controller",title:"ingress_controller",description:"El ingress controller es un servicio que se ejecuta en un pod y que permite observar los objetos endpoint. Cuando un nuevo objeto es creado, ingress controller lo detecta y aplica las reglas que tenga definidas para enrutar el tr\xe1fico (normalmente HTTP).",source:"@site/docs/notas/Kubernetes/ingress_controller.md",sourceDirName:"notas/Kubernetes",slug:"/notas/Kubernetes/ingress_controller",permalink:"/docs/notas/Kubernetes/ingress_controller",draft:!1,unlisted:!1,editUrl:"https://github.com/pabpereza/pabpereza/tree/main/docs/notas/Kubernetes/ingress_controller.md",tags:[],version:"current",frontMatter:{},sidebar:"notas",previous:{title:"helm",permalink:"/docs/notas/Kubernetes/helm"},next:{title:"instalacion",permalink:"/docs/notas/Kubernetes/instalacion"}},l={},c=[{value:"Instalaci\xf3n de un ingress controller",id:"instalaci\xf3n-de-un-ingress-controller",level:2},{value:"Manifiesto de kubernetes",id:"manifiesto-de-kubernetes",level:2},{value:"Gesti\xf3n de objetos ingress",id:"gesti\xf3n-de-objetos-ingress",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["El ",(0,r.jsx)(n.code,{children:"ingress controller"})," es un servicio que se ejecuta en un pod y que permite observar los objetos ",(0,r.jsx)(n.code,{children:"endpoint"}),". Cuando un nuevo objeto es creado, ",(0,r.jsx)(n.code,{children:"ingress controller"})," lo detecta y aplica las reglas que tenga definidas para enrutar el tr\xe1fico (normalmente HTTP)."]}),"\n",(0,r.jsx)(n.p,{children:"En resumen, permite enrutar tr\xe1fico desde fuera de un cluster a los servicios del mismo."}),"\n",(0,r.jsxs)(n.p,{children:["Cualquier tecnolog\xeda que sirviera como proxy inverso se puede utilizar como ",(0,r.jsx)(n.code,{children:"ingress controller"}),". Uno de los m\xe1s comunes es nginx."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/kubernetes/ingress-nginx/blob/main/docs/deploy/index.md",children:"Ejemplos de configuraci\xf3n de nginx para diferentes plataformas ( docker desktop, minikube, AWS, GCP, Azure...)"})}),"\n",(0,r.jsx)(n.h2,{id:"instalaci\xf3n-de-un-ingress-controller",children:"Instalaci\xf3n de un ingress controller"}),"\n",(0,r.jsx)(n.p,{children:"Podemos instalar el ingress controller basado en nginx con [[helm]]."}),"\n",(0,r.jsxs)(n.p,{children:["Primero a\xf1adimos el repositorio de ",(0,r.jsx)(n.code,{children:"ingress-nginx"})," y actualizamos:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:" helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx\n helm repo update\n"})}),"\n",(0,r.jsx)(n.p,{children:"Descargamos el chart:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"helm fetch ingress-nginx/ingress-nginx --untar\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Modificamos el fichero ",(0,r.jsx)(n.code,{children:"values.yaml"})," y en la l\xednea que pone ",(0,r.jsx)(n.code,{children:"kind: Deployment"})," actualizamos el valor por ",(0,r.jsx)(n.code,{children:"DaemonSet"})," quedando as\xed:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"## DaemonSet or Deployment\nkind: DaemonSet\n"})}),"\n",(0,r.jsx)(n.p,{children:"Instalamos el chart que acabamos de modificar:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"helm install myingress .\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Ahora ya podemos a\xf1adir objetos de tipo ",(0,r.jsx)(n.code,{children:"ingress"})," en kubernetes."]}),"\n",(0,r.jsx)(n.h2,{id:"manifiesto-de-kubernetes",children:"Manifiesto de kubernetes"}),"\n",(0,r.jsx)(n.p,{children:"Podemos declarar el objeto del manifiesto de kubernetes como en el siguiente ejemplo:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: networking.k8s.io/v1beta1 \nkind: Ingress \nmetadata:\nrules:\n  - host: <hostname> \n    http:\n      paths:\n      - backend:\n          service:\n            name: <nombre> \n            port:\n              number: <puerto> \n        path: /\n        pathType: ImplementationSpecific\n"})}),"\n",(0,r.jsx)(n.h2,{id:"gesti\xf3n-de-objetos-ingress",children:"Gesti\xf3n de objetos ingress"}),"\n",(0,r.jsx)(n.p,{children:"Los principales comando de gesti\xf3n son:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl get ingress\nkubectl delete ingress <nombre>\nkubectl edit ingress <nombre>\n"})})]})}function u(e={}){const{wrapper:n}={...(0,o.M)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},4552:(e,n,s)=>{s.d(n,{I:()=>a,M:()=>i});var r=s(11504);const o={},t=r.createContext(o);function i(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);