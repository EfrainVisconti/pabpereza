"use strict";(self.webpackChunkpabpereza=self.webpackChunkpabpereza||[]).push([[4768],{96324:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>l});var r=a(17624),d=a(4552);const s={},i=void 0,o={id:"notas/redes",title:"redes",description:"Utilidades de red",source:"@site/docs/notas/redes.md",sourceDirName:"notas",slug:"/notas/redes",permalink:"/docs/notas/redes",draft:!1,unlisted:!1,editUrl:"https://github.com/pabpereza/pabpereza/tree/main/docs/notas/redes.md",tags:[],version:"current",frontMatter:{},sidebar:"notas",previous:{title:"oh_my_posh",permalink:"/docs/notas/oh_my_posh"},next:{title:"seguridad-contenedores",permalink:"/docs/notas/seguridad-contenedores"}},c={},l=[{value:"Utilidades de red",id:"utilidades-de-red",level:2},{value:"Configuraci\xf3n de una red - Comando IP",id:"configuraci\xf3n-de-una-red---comando-ip",level:2},{value:"Asignar una direcci\xf3n IP a una interfaz de red",id:"asignar-una-direcci\xf3n-ip-a-una-interfaz-de-red",level:3},{value:"Comprobando la puerta de enlace",id:"comprobando-la-puerta-de-enlace",level:3},{value:"Configuraci\xf3n de una red - NetworkManager",id:"configuraci\xf3n-de-una-red---networkmanager",level:2}];function t(e){const n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,d.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"utilidades-de-red",children:"Utilidades de red"}),"\n",(0,r.jsx)(n.p,{children:"Existen varias herramientas que nos ayudan a trabajar con redes:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"# Ping - comprueba la conexi\xf3n con un hosts y si est\xe1 acttivo\nping -c 4 google.com # Con el -c 4 el n\xfamero de veces que se ejecuta el ping\n\n# Traceroute - identifica la ruta que se ha recorrido para llegar a un host\ntraceroute google.com\n\n# Netstat - muestra los puertos abiertos en el sistema\nnetstat -l\n\n# ARP - muestran la tabla ARP del sistema que act\xfaa como una cache.\narp -a # Muestra la relaci\xf3n entre direcciones IP y direcciones MAC\n"})}),"\n",(0,r.jsx)(n.h2,{id:"configuraci\xf3n-de-una-red---comando-ip",children:"Configuraci\xf3n de una red - Comando IP"}),"\n",(0,r.jsxs)(n.p,{children:["Con el comando ",(0,r.jsx)(n.code,{children:"ip"})," podemos alterar la configuraci\xf3n de una interfaz de red. Para ello hay m\xfaltiples opciones de este comando que debemos conocer previamente:"]}),"\n",(0,r.jsx)(n.p,{children:"Listar las interfaces de red, informaci\xf3n y estado:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ip addr\n\n# O su versi\xf3n corta\nip a\n"})}),"\n",(0,r.jsx)(n.p,{children:"Ver la configuraci\xf3n de una interfaz de red:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ip addr show ens33\n\n# O su versi\xf3n corta\nip a s ens33\n"})}),"\n",(0,r.jsx)(n.p,{children:"Habilitar o deshabilitar una interfaz de red:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"#Habilitar\nip link set ens33 up\n\n#Deshabilitar\nip link set ens33 down\n"})}),"\n",(0,r.jsxs)(n.p,{children:["El estado de una interfaz de red lo podr\xedamos ver tras el  ",(0,r.jsx)(n.code,{children:"state"})," de la configuraci\xf3n de la interfaz marcado como ",(0,r.jsx)(n.code,{children:"UP"})," o ",(0,r.jsx)(n.code,{children:"DOWN"}),".:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ip a s ens33\nens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000\nlink/ether 00:15:5d:cc:35:ff brd ff:ff:ff:ff:ff:ff\ninet 172.17.71.94/20 brd 172.17.79.255 scope global eth0\n\tvalid_lft forever preferred_lft forever\ninet6 fe80::215:5dff:fecc:35ff/64 scope link\n\tvalid_lft forever preferred_lft forever\n"})}),"\n",(0,r.jsx)(n.h3,{id:"asignar-una-direcci\xf3n-ip-a-una-interfaz-de-red",children:"Asignar una direcci\xf3n IP a una interfaz de red"}),"\n",(0,r.jsxs)(n.p,{children:["Para asignar una direcci\xf3n IP a una interfaz de red debemos usar el comando ",(0,r.jsx)(n.code,{children:"ip addr add"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ip addr add <IP>/<MASCARA> dev <INTERFACE>\n\n#Por ejemplo:\nip addr add 192.168.1.56/255.255.255.0 dev ens33\n#o\nip addr add 192.168.1.56/24 dev ens33\n"})}),"\n",(0,r.jsx)(n.p,{children:"Tambi\xe9n podr\xedamos a\xf1adir la direcci\xf3n de broadcast:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ip addr add <IP>/<MASCARA> broadcast <BROADCAST> dev <INTERFACE>\n\n# O su versi\xf3n corta\nip a a <IP>/<MASC\n"})}),"\n",(0,r.jsx)(n.h3,{id:"comprobando-la-puerta-de-enlace",children:"Comprobando la puerta de enlace"}),"\n",(0,r.jsxs)(n.p,{children:["Para comprobar si una interfaz de red tiene una puerta de enlace activa podemos usar el comando ",(0,r.jsx)(n.code,{children:"ip route show"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ip route show\n"})}),"\n",(0,r.jsx)(n.p,{children:"Tambi\xe9n podemos obtener la informaci\xf3n de enrutamiento a una IP particular usando:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ip route get <IP>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"configuraci\xf3n-de-una-red---networkmanager",children:"Configuraci\xf3n de una red - NetworkManager"}),"\n",(0,r.jsx)(n.p,{children:"Antes de comenzar, vamos a parar el servicio 'network-manager' para que no interfiera con nuestra configuraci\xf3n. Este servicio es el encargado de gestionar las redes.\nEsto lo podemos hacer con el comando:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"systemctl stop network-manager\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Para configurar una red en Ubuntu Server tendremos que crear un fichero llamado ",(0,r.jsx)(n.code,{children:"01-netcfg.yaml"})," en la carpeta ",(0,r.jsx)(n.code,{children:"/etc/netplan"}),".\nEl fichero especifica por cada red si queremos utilizar DHCP, direcci\xf3n IP manual (en caso de no usar DHCP), gateays y servidores DNS ",(0,r.jsx)(n.code,{children:"nameservers"}),".\nEjemplo (obviar las l\xedneas que comienzan por ",(0,r.jsx)(n.code,{children:"#"})," ya que son comentarios para explicar el fichero):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"network:\n  version: 2\n  renderer: NetworkManager\n  # Se especifiaca cada una de las redes que queremos configurar\n  ethernets:\n    # Ejemplo de red con DHCP que recibir\xe1 la direcci\xf3n IP autom\xe1ticamente\n\tens33:\n\t  dhcp4: yes\n\t  dhcp6: yes\n\t  nameservers:\n\t\taddresses: [8.8.8.8, 8.8.4.4]\n\t# Ejemplo de una red con IP manual\n\tens38:\n\t  dhcp4: no\n\t  dhcp6: no\n\t  addresses: [192.168.1.120/24]\n\t  # Se especifica la puerta de enlace. IP del router.\n\t  gateway4: 192.168.1.1\n\t  nameservers:\n\t    addresses: [8.8.8.8, 8.8.4.4]\n"})}),"\n",(0,r.jsx)(n.p,{children:"Una vez terminado de editar el fichero, tenemos que aplicar los cambios con el comando:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"netplan apply\n"})}),"\n",(0,r.jsx)(n.p,{children:"Finalmente, volver\xedamos a arrancar el servicio 'network-manager' para que los cambios surjan efecto:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"systemctl start network-manager\n"})})]})}function u(e={}){const{wrapper:n}={...(0,d.M)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},4552:(e,n,a)=>{a.d(n,{I:()=>o,M:()=>i});var r=a(11504);const d={},s=r.createContext(d);function i(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);