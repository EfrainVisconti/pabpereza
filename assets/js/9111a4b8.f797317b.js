"use strict";(self.webpackChunkpabpereza=self.webpackChunkpabpereza||[]).push([[1944],{95124:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>i,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>c});var s=o(17624),a=o(4552);const l={},d=void 0,r={id:"notas/Kubernetes/scheduling",title:"scheduling",description:"La funci\xf3n de scheduling es la que decide qu\xe9 podemos ejecutar en un nodo. Por ejemplo, podemos decidir en que nodo se ejecuta un pod en base a varios criterios.",source:"@site/docs/notas/Kubernetes/scheduling.md",sourceDirName:"notas/Kubernetes",slug:"/notas/Kubernetes/scheduling",permalink:"/docs/notas/Kubernetes/scheduling",draft:!1,unlisted:!1,editUrl:"https://github.com/pabpereza/pabpereza/tree/main/docs/notas/Kubernetes/scheduling.md",tags:[],version:"current",frontMatter:{},sidebar:"notas",previous:{title:"roles",permalink:"/docs/notas/Kubernetes/roles"},next:{title:"secrets_configmaps",permalink:"/docs/notas/Kubernetes/secrets_configmaps"}},i={},c=[{value:"Scheduling policies",id:"scheduling-policies",level:2},{value:"Labels",id:"labels",level:2},{value:"A\xf1adir un label a un nodo",id:"a\xf1adir-un-label-a-un-nodo",level:3},{value:"Eliminar un label de un nodo",id:"eliminar-un-label-de-un-nodo",level:3},{value:"Desplegar pods con nodos espec\xedficos con labels personalizados",id:"desplegar-pods-con-nodos-espec\xedficos-con-labels-personalizados",level:3},{value:"Taints",id:"taints",level:2}];function t(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"La funci\xf3n de scheduling es la que decide qu\xe9 podemos ejecutar en un nodo. Por ejemplo, podemos decidir en que nodo se ejecuta un pod en base a varios criterios."}),"\n",(0,s.jsx)(n.p,{children:"Se pueden utilizar diferentes opciones y etiquetas para esto:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Labels"}),"\n",(0,s.jsx)(n.li,{children:"Taints"}),"\n",(0,s.jsx)(n.li,{children:"Affinity"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"scheduling-policies",children:"Scheduling policies"}),"\n",(0,s.jsx)(n.p,{children:"Permiten definir los criterios de scheduling para un cl\xfaster, este establece un conjunto de reglas que se aplican a los nodos."}),"\n",(0,s.jsx)(n.h2,{id:"labels",children:"Labels"}),"\n",(0,s.jsx)(n.p,{children:"Los labels son una forma de identificar un nodo. Nos permiten agrupar nodos por un criterio, por ejemplo, podemos agrupar los nodos por pa\xeds o por tipo de hardware."}),"\n",(0,s.jsx)(n.p,{children:"Para ver la informaci\xf3n de un nodo, podemos usar los siguientes comando:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"kubectl describe node # Para ver el nodo actual\nkubectl describe node <nombre_nodo> # Para ver el nodo especificado\nkubectl describe nodes # Para ver todos los nodos\n"})}),"\n",(0,s.jsx)(n.p,{children:"Podr\xedamos ver concretamente los labels de un nodo:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"kubectl describe nodes | grep -A5 -i label\n"})}),"\n",(0,s.jsx)(n.p,{children:"Esto mejora la organizaci\xf3n de los nodos y nos permite filtrar por un criterio determinado. Adem\xe1s, y donde m\xe1s potencial obtiene esta caracter\xedstica, podemos configurar los pods con estos labels para que se ejecuten en un nodo determinado."}),"\n",(0,s.jsxs)(n.p,{children:["Podemos especificar el nodo en el que queremos que se ejecute un pod con el par\xe1metro ",(0,s.jsx)(n.code,{children:"nodeSelector"}),". Por ejemplo::"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-pod\nspec:\n  containers:\n  - name: my-container\n\timage: busybox\n\tcommand:\n\t- sleep\n\t- "3600"\n  nodeSelector:\n\tkubernetes.io/hostname: my-node #Para especificar un nodo concreto\n'})}),"\n",(0,s.jsx)(n.h3,{id:"a\xf1adir-un-label-a-un-nodo",children:"A\xf1adir un label a un nodo"}),"\n",(0,s.jsx)(n.p,{children:"Para a\xf1adir un label a un nodo, podemos usar el siguiente comando:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"kubectl label nodes <nombre_nodo> <nombre_label>=<valor_label>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"eliminar-un-label-de-un-nodo",children:"Eliminar un label de un nodo"}),"\n",(0,s.jsx)(n.p,{children:"Para eliminar un label de un nodo, podemos usar el siguiente comando:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"kubectl label nodes <nombre_nodo> <nombre_label>-\n"})}),"\n",(0,s.jsx)(n.h3,{id:"desplegar-pods-con-nodos-espec\xedficos-con-labels-personalizados",children:"Desplegar pods con nodos espec\xedficos con labels personalizados"}),"\n",(0,s.jsx)(n.p,{children:"Siguiendo el ejemplo anterior, podemos a\xf1adir un label a un nodo y desplegar un pod en ese nodo."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-pod\nspec:\n  containers:\n  - name: my-container\n\timage: busybox\n\tcommand:\n\t- sleep\n\t- "3600"\n  nodeSelector:\n\t<label-personalizado>: <valor_label> # Para especificar un nodo concreto \n'})}),"\n",(0,s.jsx)(n.h2,{id:"taints",children:"Taints"}),"\n",(0,s.jsxs)(n.p,{children:["Los ",(0,s.jsx)(n.code,{children:"taints"})," nos permiten especificar una restricci\xf3n a un nodo para controlar donde los pods se est\xe1n ejecutando y donde tienen permisos de hacerlo."]}),"\n",(0,s.jsx)(n.p,{children:"Existen tres tipos de taints:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"NoSchedule"}),": No permite que se ejecuten pods en el nodo."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PreferNoSchedule"}),": Intenta no ejecutar pods en el nodo."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"NoExecute"}),": No permite que se ejecuten pods en el nodo y evita que los pods que ya se est\xe9n ejecutando en el nodo se muevan a otro nodo."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},4552:(e,n,o)=>{o.d(n,{I:()=>r,M:()=>d});var s=o(11504);const a={},l=s.createContext(a);function d(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:d(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);