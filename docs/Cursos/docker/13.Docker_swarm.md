# Docker Swarm 
Docker Swarm es una herramienta de orquestación de contenedores que permite darle escalabilidad a nuestras aplicaciones. Viene incluido en Docker, permite distribuir contenedores en diferentes nodos y gobernarlos de manera centralizada. 

Sería una alternativa a Kubernetes, algo más limitado, pero a la vez más sencillo de usar y configurar. Lo más importante, es que usa ficheros YAML como compose, con alguna etiqueta adicional a lo que vimos en el vídeo anterior.

## Activar Docker Swarm
Docker Swarm viene preinstalado tanto en Docker Desktop como en Docker Engine. Lo único que tendremos que hacer, es activar el modo Swarm. Para ello, ejecutamos el siguiente comando:
```bash
docker swarm init
```
Con este comando, estamos creando un nodo manager, que es el que se encargará de gobernar el resto de nodos.

## Gestión de nodos

### Crear nodos o worker
Una vez que tenemos el nodo manager, podemos añadir nodos workers. Para ello, ejecutamos el siguiente comando en el nodo que queramos añadir:
```bash
docker swarm join --token <token> <ip_manager>:<puerto>
```

Importante tener en cuenta que tiene que haber conectividad entre los nodos, por lo que si estamos en una red local, no habrá problema. En caso de estar en la nube, tendremos que abrir el puerto 2377, que es el que usa Docker Swarm por defecto.

### Eliminar nodo o workers
Podemos eliminar un nodo de la siguiente manera:
```bash
docker node rm <nombre_nodo>
```

### Desactivar Docker Swarm
Para desactivar Docker Swarm, ejecutamos el siguiente comando:
```bash
docker swarm leave
```
Esto eliminaría el nodo y desactivaría el modo Swarm. **En caso de ser un nodo manager, se eliminaría el cluster completo.**


## Servicios
Los servicios son la manera de orquestar los contenedores en Docker Swarm. Se definen en un fichero YAML, similar a los ficheros de Docker Compose, pero con alguna etiqueta adicional. Por ejemplo, el siguiente fichero YAML define un servicio que crea 5 contenedores de la imagen `nginx`:

```yaml
version: '3.8'
web:
  image: nginx
  deploy:
    replicas: 5
```



### Crear servicios


### Inspeccionar servicios


### Escalar servicios


### Actualizar servicios


### Eliminar servicios


## Compose y stacks


## Balanceo de carga



---
* Lista de vídeos en Youtube: [Curso de Docker](https://www.youtube.com/playlist?list=PLQhxXeq1oc2n7YnjRhq7qVMzZWtDY7Zz0)

[Volver al índice](README.md#índice)


